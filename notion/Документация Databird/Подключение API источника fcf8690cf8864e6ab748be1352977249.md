# 

Чтобы передавать данные по API в систему DataBird, необходимо создать источник с типом JSON или API.

## JSON

В источнике типа JSON необходимо выбрать метод (get/post), указать ссылку на фид и ввести данные для авторизации Basic Auth (при наличии).

![image.png](/image.png)

При выборе метода “POST” можно будет ввести тело запроса.

![image.png](/image%201.png)

Пример тела запроса:

```jsx
jsonata:
{
'headers': 
	{
	'X-test': '123456789', 
	'Accept-Language': 'en-US,en;q=0.5'
	}
}
```

❗В начале обязательно `jsonata:`

Если функционала источника JSON недостаточно, то можно создать источник типа API.

## API

![image.png](/d0ce6654-9db8-4618-9619-735b1bc9cafb.png)

**AXIOS** - JSONata выражение, которое должно возвращать запрос в нужном формате.

**Повторять запрос** - настройка, которую надо включать, если ваш апи работает через пагинацию, тогда запрос будет повторяться до тех пор, пока в выражении JSONata не вернется doStop = true.

**Путь к товару** - путь к товару в ответном JSON.

AXIOUS формат:

```jsx
{

"headers"  - заголовки

"url"  - путь

"params" - параметры запроса

"method" - метод (get, post). get по умолчанию

"doStop" - остановиться для случая с повторением запроса

}
```

Примеры AXIOUS:

```jsx
{
    "headers" : {
         "X-API-Key" : "123456789"
    },
   "url" : "https://connector.b2b.ocs.ru/api/v2/catalog/categories/all/products",
   "params" : 
    {
          "shipmentcity" : "Москва",
          "onlyavailable" : true,
          "includeregular" : true
    }
}
```

```jsx
{
    "headers" : {
         "Authorization" : "123456789"
    },
   "url" : "http://193.106.69.207:8760/rexant/hs/api/v1/product-short",
   "params" : {
          "offset" : $REQUEST ? $REQUEST.params.offset + 1000  : 0,
          "limit" : 1000
    },
   "doStop" : result ? result.totalobjects < 2000 : false
}
```

**$REQUEST** -  это значение запроса с предыдущего цикла (используется с включенной настройкой “Повторять запрос” и прописанным "doStop" условием). Используется чтобы изменить один из параметров для следующего запроса.
