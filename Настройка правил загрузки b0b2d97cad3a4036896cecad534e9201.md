# Настройка правил загрузки

Настройка правил загрузки происходит внутри каждого подключения, во вкладке **“Атрибуты”**.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled.png)

Во вкладке можно прописать условия на основе которых будет происходить обработка данных и из сопоставление со внутренними атрибутами Databird.

Атрибут можно выбрать из выпадающего списка или добавить абсолютно новый, введя его название и нажав кнопку “Добавить”. Поле “ID товара” является обязательным к заполнению и должно быть заполнено так, чтоб быть уникальным для каждого нового товара.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%201.png)

❕Если нужный атрибут отсутствует в списке атрибутов системы, его также можно добавить , перейдя  во вкладку **“Атрибуты товара”**, ****в левом окне или воспользовавшись специальным полем внизу страницы. 

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%202.png)

В этом поле можно выбрать и вернуть как случайно удаленный атрибут, так и добавить абсолютно новый, введя его название и описание.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%203.png)

 ****❕Удаление нового атрибута внутри подключения не удаляет его шаблон во вкладке **“Атрибуты товара”.**

Рядом с интересующим атрибутом следует нажать на кнопку *“Настроить”*. Разберем на примере атрибута Бренд.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%204.png)

В отрывшемся окне необходимо сопоставить атрибут с исходным полем. Щелчком по выпадающему списку отобразится список найденных в источнике данных исходных полей. 

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%205.png)

Ищем и выбираем похожее исходное поле и не забываем “Сохранить” результат. 

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%206.png)

Иногда при приравнивании может потребоваться какая-то более сложная логика, для этого предусмотрены “Операции” и “Операции JSONata”.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%207.png)

Обычные операции работаю на подобии фильтров каталога и представляют собой простые действия производимые с выбранным ранее исходным полем. Из выпадающего списка можно выбрать операцию и задать необходимый операнд. Если задать несколько операций, то выполняться они будут в порядке очереди с верху вниз.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%208.png)

Операции JSONata предназначены для еще более сложной логики обработки исходного поля. В появившемся поле необходимо прописать код на языке JSONata. К исходному полю можно обращаться переменной $VALUE.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%209.png)

При необходимости можно задать приоритет выполнения операции. Чем выше значение - тем позже выполняется приравнивание.

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%2010.png)

Слева можно наблюдать вкладку данные в которой после запуска будут отображены данные в том виде, в которым ранее были заданы присвоением или правилами. 

![Untitled](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BF%D1%80%D0%B0%D0%B2%D0%B8%D0%BB%20%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8/Untitled%2011.png)